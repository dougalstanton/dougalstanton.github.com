<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Looking Out To Sea]]></title>
  <link href="http://dougalstanton.github.com/atom.xml" rel="self"/>
  <link href="http://dougalstanton.github.com/"/>
  <updated>2013-02-19T22:35:23+00:00</updated>
  <id>http://dougalstanton.github.com/</id>
  <author>
    <name><![CDATA[Dougal Stanton]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Home-brew static analysis for fun and profit]]></title>
    <link href="http://dougalstanton.github.com/blog/2013/02/19/home-brew-static-analysis/"/>
    <updated>2013-02-19T22:28:00+00:00</updated>
    <id>http://dougalstanton.github.com/blog/2013/02/19/home-brew-static-analysis</id>
    <content type="html"><![CDATA[<p>I&#8217;ve had recent success with writing test tools for use in-house. We have a system which greatly abuses the C preprocessor to create (at build-time) sets of translations and default settings for different languages and particular customers.</p>

<p>Due to the limitations of anything built with the preprocessor there isn&#8217;t anything even remotely like type checking. In order to truly spot any problems in the translations you have to build the binary (and potentially even <em>run</em> it). Which means we need a single binary which includes every single customer variant and linguistic complexity, which will take an age to build; or we have to build have a dozen variants to ensure that adding one thing doesn&#8217;t cause mayhem.</p>

<p>And as mentioned, building it doesn&#8217;t really go all the way. If the possible values for a timer are between 5 and 300 there&#8217;s no way the compiler can spot that 405 or 2 are invalid. All it can check is that the <code>int</code> you&#8217;ve provided will happily compile when inserted into an array of <code>int</code>.</p>

<p>Thankfully most of these checks can be done easily and quickly &#8212; very quickly &#8212; without even compiling. The unprocessed file has some hints to translators to indicate what are valid sizes for strings, ranges for numbers and descriptions of the text. Parsing this meta-data alongside the translations gives us all the information we need to perform these checks without compiling anything.</p>

<p>Once the necessary data is parsed and the remainder discarded we can get to the interesting work. Thankfully I started this work during a period of intense development on menu strings and default options, so the translation file was suffering a lot of abuse. Finding candidate tests was as easy as looking at the most recent reasons for fixing the file.</p>

<p>Initially I ran all tests in parallel, gathering results as they went and discarding the used data. (A single pass is definitely beneficial when you&#8217;ve just loaded in ~100,000 lines.) This was considerably faster than running one pass for each test. The result was printed to standard out almost instantly, which was gratifying when it passed and even better when it spotted a legitimate failure.</p>

<p>But I was tempted by the option in the Jenkins CI server to pick up JUnit-style XML files and create comparison graphs of successive runs. I could have graphs of my successful tests, for free! All I would have to do is write some XML in an undocumented format, which no longer felt so appealing.</p>

<p>Thankfully a test runner called Test Framework came to the rescue, promising to write the XML for me. I converted the format and results of my tests into some structure it could understand and let it do the hard work. I got prettier command line output and XML files that Jenkins could parse, but lost one-pass testing. I can live with this; the tests still run in about six seconds which is a considerable saving on a twenty minute build.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Five minutes everyday to turn the world upside down]]></title>
    <link href="http://dougalstanton.github.com/blog/2013/02/18/five-minutes-everyday/"/>
    <updated>2013-02-18T18:59:00+00:00</updated>
    <id>http://dougalstanton.github.com/blog/2013/02/18/five-minutes-everyday</id>
    <content type="html"><![CDATA[<p>I&#8217;ve been doing capoeira now for about two years I think, and
one thing that hasn&#8217;t really changed in that time is my complete
inability to do a handstand or a cartwheel.</p>

<p>Since the beginning of the year (you know, midway through January)
I&#8217;ve had an alarm on my phone that buzzes at 6.30pm <em>every single day</em>
and tells me I have to practise. Nearly every single day since I started I
have set aside five minutes to practise. I set a timer so that I don&#8217;t
do 3 minutes then decide that I&#8217;m probably done, and so that I stop at
5 minutes. The point is that it&#8217;s not supposed to be a burden or a
long gruelling exercise regime.</p>

<p>Five minutes practice every day &#8212; throwing myself up against a bare
wall initially, but slowly becoming more independent &#8212; has brought
about a massive change. I&#8217;m still not capable of busting out amazing
inverted moves but if I&#8217;d known two years ago that I could be where I
am now with only month of this I would be shocked.</p>

<p>I&#8217;ll continue to be shocked and I hope the improvements will continue
too.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Salvaging the Challenge]]></title>
    <link href="http://dougalstanton.github.com/blog/2013/02/17/salvaging-the-challenge/"/>
    <updated>2013-02-17T18:57:00+00:00</updated>
    <id>http://dougalstanton.github.com/blog/2013/02/17/salvaging-the-challenge</id>
    <content type="html"><![CDATA[<p>Since losing the old blog host I&#8217;ve been trying to reclaim what I could
from the Wayback Machine, particularly archives of Helen&#8217;s blog.</p>

<p>There aren&#8217;t enough entries saved to cover the whole year, even if we
ignore the entries which aren&#8217;t part of the challenge. Which basically
means we&#8217;ve lost the record of the challenge and frankly I&#8217;m gutted by
this state of affairs.</p>

<p>I have 67 saved entries and there should be about 190, though some of
those will be links to the same article. This is still a lot of missing
posts.</p>

<p>At this point I&#8217;m beginning to wonder if saving those 67 is worth it.
I&#8217;m quite demoralised.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Migration to Octopress etc]]></title>
    <link href="http://dougalstanton.github.com/blog/2013/02/11/migration-to-octopress-etc/"/>
    <updated>2013-02-11T19:43:00+00:00</updated>
    <id>http://dougalstanton.github.com/blog/2013/02/11/migration-to-octopress-etc</id>
    <content type="html"><![CDATA[<p>After the loss of my old blog, which I hope to at least salvage
from the Wayback Machine at some point, I&#8217;ve moved over to using
Octopress which has the built-in advantage of backed-up posts.</p>

<p>I shouldn&#8217;t be able to lose it all again.</p>

<p>(What is it about backing up data? You never do it until you&#8217;ve
been burned once? I think that seems about right. Everyone is
invincible until the first time they are laid low.)</p>

<p>Soon I will get my domain redirected here, so while things are
interrupted they will not be interrupted forever.</p>
]]></content>
  </entry>
  
</feed>
